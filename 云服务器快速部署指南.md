# äº‘æœåŠ¡å™¨å¿«é€Ÿéƒ¨ç½²æŒ‡å— - 3å°æ—¶æå®šç‹¬ç«‹ç½‘ç«™

## ğŸ¯ å¿«é€Ÿæ¦‚è§ˆ

**ç›®æ ‡ï¼š** å°†SCL-90ç½‘ç«™éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼Œæœˆæˆæœ¬çº¦73å…ƒ
**æ—¶é—´ï¼š** 3-4å°æ—¶
**éš¾åº¦ï¼š** ä¸­ç­‰ï¼ˆéœ€è¦åŸºç¡€Linuxæ“ä½œï¼‰

## ğŸ“‹ å‡†å¤‡æ¸…å•

### å¼€å§‹å‰éœ€è¦å‡†å¤‡ï¼š
- [ ] é˜¿é‡Œäº‘è´¦æˆ·ï¼ˆç”¨äºè´­ä¹°æœåŠ¡å™¨ï¼‰
- [ ] GitHubè´¦æˆ·ï¼ˆä»£ç æ‰˜ç®¡ï¼‰
- [ ] åŸŸåï¼ˆå¯é€‰ï¼Œå¯åç»­è´­ä¹°ï¼‰
- [ ] æ”¯ä»˜å®ï¼ˆç”¨äºæ”¯ä»˜ï¼‰
- [ ] æ‰‹æœºï¼ˆç”¨äºå®åè®¤è¯ï¼‰

## âš¡ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šè´­ä¹°äº‘æœåŠ¡å™¨ï¼ˆ30åˆ†é’Ÿï¼‰

1. **æ³¨å†Œé˜¿é‡Œäº‘**
   - è®¿é—®ï¼šhttps://www.aliyun.com
   - æ‰‹æœºæ³¨å†Œï¼Œå®Œæˆå®åè®¤è¯

2. **è´­ä¹°ECSæœåŠ¡å™¨**
   ```
   é…ç½®é€‰æ‹©ï¼š
   - ä½ç½®ï¼šåŒ—äº¬æˆ–æ­å·
   - è§„æ ¼ï¼š1æ ¸2Gå†…å­˜
   - ç³»ç»Ÿï¼šUbuntu 20.04
   - å­˜å‚¨ï¼š40GB SSD
   - å¸¦å®½ï¼š1Mbps
   - è´­ä¹°æ—¶é•¿ï¼š1å¹´ï¼ˆæœ€ä¼˜æƒ ï¼‰
   ```

3. **è´¹ç”¨ç¡®è®¤**
   - æœåŠ¡å™¨ï¼š68å…ƒ/æœˆ Ã— 12 = 816å…ƒ
   - åŸŸåï¼ˆå¯é€‰ï¼‰ï¼š60å…ƒ/å¹´
   - **æ€»è®¡ï¼šçº¦876å…ƒ/å¹´ï¼ˆå¹³å‡73å…ƒ/æœˆï¼‰**

### ç¬¬äºŒæ­¥ï¼šæœåŠ¡å™¨åŸºç¡€é…ç½®ï¼ˆ45åˆ†é’Ÿï¼‰

1. **è¿æ¥æœåŠ¡å™¨**
   ```bash
   # è·å–æœåŠ¡å™¨IPåœ°å€
   # ä½¿ç”¨SSHè¿æ¥
   ssh root@æ‚¨çš„æœåŠ¡å™¨IP
   ```

2. **åŸºç¡€è®¾ç½®**
   ```bash
   # æ›´æ–°ç³»ç»Ÿ
   apt update && apt upgrade -y

   # å®‰è£…åŸºç¡€å·¥å…·
   apt install -y curl wget git vim

   # åˆ›å»ºç”¨æˆ·ï¼ˆæ¨èï¼‰
   adduser admin
   usermod -aG sudo admin
   ```

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£…ç¯å¢ƒï¼ˆ60åˆ†é’Ÿï¼‰

1. **å®‰è£…Node.js**
   ```bash
   # å®‰è£…Node.js 18
   curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
   apt-get install -y nodejs

   # éªŒè¯å®‰è£…
   node -v && npm -v

   # å®‰è£…PM2ï¼ˆè¿›ç¨‹ç®¡ç†ï¼‰
   npm install -g pm2
   ```

2. **å®‰è£…MongoDB**
   ```bash
   # å®‰è£…MongoDB
   wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | apt-key add -
   echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse" | tee /etc/apt/sources.list.d/mongodb-org-6.0.list
   apt-get update
   apt-get install -y mongodb-org

   # å¯åŠ¨MongoDB
   systemctl start mongod
   systemctl enable mongod
   ```

3. **å®‰è£…Nginx**
   ```bash
   # å®‰è£…Nginx
   apt install -y nginx
   systemctl start nginx
   systemctl enable nginx
   ```

### ç¬¬å››æ­¥ï¼šéƒ¨ç½²åº”ç”¨ï¼ˆ45åˆ†é’Ÿï¼‰

1. **å…‹éš†ä»£ç **
   ```bash
   # åˆ‡æ¢åˆ°adminç”¨æˆ·
   su - admin

   # å…‹éš†é¡¹ç›®
   git clone https://github.com/æ‚¨çš„ç”¨æˆ·å/my-scl90-website.git
   cd scl90-website

   # å®‰è£…ä¾èµ–
   npm install
   ```

2. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # åˆ›å»ºç¯å¢ƒé…ç½®
   nano .env.production

   # æ·»åŠ ä»¥ä¸‹å†…å®¹
   NODE_ENV=production
   PORT=3000
   MONGODB_URI=mongodb://localhost:27017/scl90
   ADMIN_PASSWORD=1234love
   ```

3. **å¯åŠ¨åº”ç”¨**
   ```bash
   # ä½¿ç”¨PM2å¯åŠ¨
   pm2 start server-final.js --name "scl90-website"
   pm2 save
   pm2 startup
   ```

### ç¬¬äº”æ­¥ï¼šé…ç½®Nginxåå‘ä»£ç†ï¼ˆ30åˆ†é’Ÿï¼‰

1. **åˆ›å»ºé…ç½®æ–‡ä»¶**
   ```bash
   sudo nano /etc/nginx/sites-available/scl90
   ```

2. **æ·»åŠ é…ç½®å†…å®¹**
   ```nginx
   server {
       listen 80;
       server_name æ‚¨çš„åŸŸå.com;  # æš‚æ—¶ç”¨IPåœ°å€

       location / {
           proxy_pass http://localhost:3000;
           proxy_http_version 1.1;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
       }
   }
   ```

3. **å¯ç”¨é…ç½®**
   ```bash
   sudo ln -s /etc/nginx/sites-available/scl90 /etc/nginx/sites-enabled/
   sudo rm /etc/nginx/sites-enabled/default
   sudo nginx -t
   sudo systemctl reload nginx
   ```

### ç¬¬å…­æ­¥ï¼šSSLè¯ä¹¦é…ç½®ï¼ˆ15åˆ†é’Ÿï¼‰

1. **å®‰è£…Certbot**
   ```bash
   sudo apt install -y certbot python3-certbot-nginx
   ```

2. **è·å–SSLè¯ä¹¦**
   ```bash
   # å¦‚æœæœ‰åŸŸåï¼Œä½¿ç”¨åŸŸå
   sudo certbot --nginx -d æ‚¨çš„åŸŸå.com

   # å¦‚æœæš‚æ—¶æ²¡æœ‰åŸŸåï¼Œè·³è¿‡æ­¤æ­¥
   ```

## ğŸ§ª æµ‹è¯•éªŒè¯

### åŸºç¡€åŠŸèƒ½æµ‹è¯•
1. **è®¿é—®ç½‘ç«™**
   - æµè§ˆå™¨è®¿é—®ï¼šhttp://æ‚¨çš„æœåŠ¡å™¨IP
   - åº”è¯¥çœ‹åˆ°SCL-90ä¸»é¡µ

2. **æ£€æŸ¥API**
   - è®¿é—®ï¼šhttp://æ‚¨çš„æœåŠ¡å™¨IP/api/questions
   - åº”è¯¥è¿”å›JSONæ ¼å¼çš„é¢˜ç›®

3. **æµ‹è¯•ç®¡ç†å‘˜åŠŸèƒ½**
   - è®¿é—®ï¼šhttp://æ‚¨çš„æœåŠ¡å™¨IP/admin
   - å¯†ç ï¼š1234love

### æœåŠ¡çŠ¶æ€æ£€æŸ¥
```bash
# æ£€æŸ¥åº”ç”¨çŠ¶æ€
pm2 status

# æ£€æŸ¥NginxçŠ¶æ€
sudo systemctl status nginx

# æ£€æŸ¥MongoDBçŠ¶æ€
sudo systemctl status mongod

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
pm2 logs
```

## ğŸ“± åŸŸåé…ç½®ï¼ˆå¯é€‰ï¼Œåç»­æ“ä½œï¼‰

### è´­ä¹°åŸŸå
1. **æ¨èå¹³å°**
   - é˜¿é‡Œäº‘ä¸‡ç½‘ï¼šwanwang.aliyun.com
   - è…¾è®¯äº‘ï¼šdnspod.cloud.tencent.com

2. **DNSé…ç½®**
   ```
   ç±»å‹ï¼šAè®°å½•
   ä¸»æœºè®°å½•ï¼š@
   è®°å½•å€¼ï¼šæ‚¨çš„æœåŠ¡å™¨IP
   ```

### é…ç½®HTTPS
```bash
# è·å–SSLè¯ä¹¦
sudo certbot --nginx -d æ‚¨çš„åŸŸå.com -d www.æ‚¨çš„åŸŸå.com

# è®¾ç½®è‡ªåŠ¨ç»­æœŸ
echo "0 12 * * * /usr/bin/certbot renew --quiet" | crontab -
```

## ğŸ”§ ç®€åŒ–è¿ç»´

### è®¾ç½®è‡ªåŠ¨å¤‡ä»½
```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
nano ~/backup.sh

#!/bin/bash
mkdir -p ~/backups
mongodump --host localhost --db scl90 --out ~/backups/$(date +%Y%m%d)
find ~/backups -type d -mtime +7 -exec rm -rf {} \;

# è®¾ç½®å®šæ—¶å¤‡ä»½
chmod +x ~/backup.sh
echo "0 2 * * * ~/backup.sh" | crontab -
```

### åŸºç¡€ç›‘æ§
```bash
# å®‰è£…htop
sudo apt install -y htop

# ç›‘æ§ç³»ç»Ÿèµ„æº
htop

# ç›‘æ§åº”ç”¨çŠ¶æ€
pm2 monit
```

## ğŸ’° è´¹ç”¨æ€»ç»“

### ä¸€æ¬¡æ€§æˆæœ¬
- æœåŠ¡å™¨ï¼ˆå¹´ä»˜ï¼‰ï¼š816å…ƒ
- åŸŸåï¼ˆå¹´ä»˜ï¼‰ï¼š60å…ƒ
- **é¦–å¹´æ€»è®¡ï¼š876å…ƒ**

### æœˆå‡æˆæœ¬
- **å¹³å‡ï¼š73å…ƒ/æœˆ**
- ç›¸æ¯”Vercel Proç‰ˆèŠ‚çœï¼š71å…ƒ/æœˆ
- ä¸€å¹´èŠ‚çœï¼š852å…ƒ

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: éƒ¨ç½²åç½‘ç«™æ— æ³•è®¿é—®ï¼Ÿ
```bash
# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status

# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tlnp | grep :80

# é‡å¯æœåŠ¡
sudo systemctl restart nginx
pm2 restart scl90-website
```

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
```bash
# æ£€æŸ¥MongoDBçŠ¶æ€
sudo systemctl status mongod

# æ‰‹åŠ¨å¯åŠ¨MongoDB
sudo systemctl start mongod

# æµ‹è¯•è¿æ¥
mongosh --host localhost
```

### Q: å¦‚ä½•æ›´æ–°ç½‘ç«™ï¼Ÿ
```bash
# æ‹‰å–æœ€æ–°ä»£ç 
cd ~/scl90-website
git pull

# é‡å¯åº”ç”¨
pm2 restart scl90-website
```

## ğŸ¯ æˆåŠŸæ ‡å‡†

éƒ¨ç½²æˆåŠŸçš„æ ‡å¿—ï¼š
- [ ] é€šè¿‡IPåœ°å€å¯ä»¥è®¿é—®ç½‘ç«™
- [ ] æ‰€æœ‰é¡µé¢æ­£å¸¸æ˜¾ç¤º
- [ ] æµ‹è¯„åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ•°æ®æ­£ç¡®ä¿å­˜
- [ ] PM2æ˜¾ç¤ºåº”ç”¨è¿è¡Œæ­£å¸¸

## ğŸ† ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸä¼˜åŒ–ï¼ˆ1å‘¨å†…ï¼‰
- [ ] è´­ä¹°å’Œé…ç½®åŸŸå
- [ ] è®¾ç½®SSLè¯ä¹¦
- [ ] é…ç½®è‡ªåŠ¨å¤‡ä»½
- [ ] åŸºç¡€ç›‘æ§è®¾ç½®

### ä¸­æœŸæ‰©å±•ï¼ˆ1ä¸ªæœˆå†…ï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] å®‰å…¨åŠ å›º
- [ ] æ•°æ®åˆ†æ
- [ ] å¤šç½‘ç«™æ”¯æŒ

### é•¿æœŸå‘å±•ï¼ˆ3ä¸ªæœˆå†…ï¼‰
- [ ] ç§»åŠ¨ç«¯APP
- [ ] æ”¯ä»˜ç³»ç»Ÿé›†æˆ
- [ ] AIåˆ†æåŠŸèƒ½
- [ ] ä¼ä¸šç‰ˆå¼€å‘

---

## ğŸ‰ æ­å–œï¼

**å¦‚æœæ‚¨æŒ‰ç…§è¿™ä¸ªæŒ‡å—æ“ä½œï¼Œ3å°æ—¶åæ‚¨å°†æ‹¥æœ‰ï¼š**
âœ… å®Œå…¨ç‹¬ç«‹çš„äº‘æœåŠ¡å™¨ç½‘ç«™
âœ… æœˆæˆæœ¬ä»…73å…ƒçš„é«˜æ€§ä»·æ¯”æ–¹æ¡ˆ
âœ… å®Œå…¨æ§åˆ¶æƒå’Œæ•°æ®è‡ªä¸»æƒ
âœ… æ”¯æŒæ— é™ç”¨æˆ·è®¿é—®
âœ… å¯æ‰©å±•åˆ°5ä¸ªæµ‹è¯„ç½‘ç«™

**ç«‹å³å¼€å§‹è¡ŒåŠ¨ï¼Œäº«å—ç‹¬ç«‹è¿è¥çš„ä¹è¶£ï¼** ğŸš€

---

**éœ€è¦å¸®åŠ©ï¼Ÿ**
- é˜¿é‡Œäº‘æŠ€æœ¯æ”¯æŒï¼š95187
- MongoDBå®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.mongodb.com
- GitHub Issuesï¼šåˆ›å»ºé—®é¢˜è·å–æ”¯æŒ