# SCL-90å¿ƒç†æµ‹è¯„ç½‘ç«™äº‘æœåŠ¡å™¨éƒ¨ç½²å®Œæ•´æŒ‡å—

## ğŸ¯ éƒ¨ç½²æ¦‚è§ˆ

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°†SCL-90ç½‘ç«™å®Œå…¨è¿ç§»åˆ°äº‘æœåŠ¡å™¨ï¼Œå®ç°ï¼š
- âœ… **ä½æˆæœ¬è¿è¥**ï¼šçº¦80-100å…ƒ/æœˆ
- âœ… **å®Œå…¨æ§åˆ¶**ï¼šè‡ªä¸»ç®¡ç†æ‰€æœ‰æœåŠ¡
- âœ… **é«˜æ€§èƒ½**ï¼šé’ˆå¯¹ä¸­å›½ç”¨æˆ·ä¼˜åŒ–
- âœ… **å¯æ‰©å±•**ï¼šæ”¯æŒå¤šä¸ªæµ‹è¯„ç½‘ç«™

## ğŸ“‹ äº‘æœåŠ¡å™¨é€‰æ‹©å¯¹æ¯”

### æ¨èé…ç½®æ–¹æ¡ˆ

| äº‘æœåŠ¡å•† | é…ç½® | æœˆè´¹ç”¨ | ä¼˜åŠ¿ | è´­ä¹°é“¾æ¥ |
|---------|------|--------|------|----------|
| é˜¿é‡Œäº‘ECS | 1æ ¸2G/40G/1M | 68å…ƒ | å›½å†…è®¿é—®å¿« | é˜¿é‡Œäº‘å®˜ç½‘ |
| è…¾è®¯äº‘CVM | 1æ ¸2G/50G/1M | 65å…ƒ | ä»·æ ¼æœ€ä½ | è…¾è®¯äº‘å®˜ç½‘ |
| åä¸ºäº‘ECS | 1æ ¸2G/40G/1M | 58å…ƒ | ä¼ä¸šçº§å®‰å…¨ | åä¸ºäº‘å®˜ç½‘ |

### æœ€ç»ˆæ¨èï¼šé˜¿é‡Œäº‘ECS
```
æ¨èç†ç”±ï¼š
âœ… å›½å†…è®¿é—®é€Ÿåº¦æœ€å¿«
âœ… æŠ€æœ¯æ–‡æ¡£å®Œå–„
âœ… å®¢æœå“åº”åŠæ—¶
âœ… ç”Ÿæ€ç³»ç»Ÿæˆç†Ÿ
âœ… ç¬¦åˆæ•°æ®åˆè§„è¦æ±‚
```

## ğŸš€ ç¬¬ä¸€é˜¶æ®µï¼šè´­ä¹°äº‘æœåŠ¡å™¨

### æ­¥éª¤1ï¼šæ³¨å†Œé˜¿é‡Œäº‘è´¦æˆ·

1. **è®¿é—®é˜¿é‡Œäº‘å®˜ç½‘**
   - ç½‘å€ï¼šhttps://www.aliyun.com
   - ç‚¹å‡»"å…è´¹æ³¨å†Œ"
   - å®Œæˆæ‰‹æœºå’Œé‚®ç®±éªŒè¯

2. **å®åè®¤è¯**
   - ä¸Šä¼ èº«ä»½è¯ç…§ç‰‡
   - å®Œæˆäººè„¸è¯†åˆ«è®¤è¯
   - é€šå¸¸éœ€è¦1-2å°æ—¶å®¡æ ¸

### æ­¥éª¤2ï¼šè´­ä¹°ECSäº‘æœåŠ¡å™¨

1. **è¿›å…¥ECSè´­ä¹°é¡µé¢**
   - æ§åˆ¶å° â†’ äº§å“ â†’ å¼¹æ€§è®¡ç®— â†’ ECSäº‘æœåŠ¡å™¨

2. **é€‰æ‹©é…ç½®**
   ```
   è®¡è´¹æ–¹å¼ï¼šåŒ…å¹´åŒ…æœˆï¼ˆæ¨èï¼‰
   åœ°åŸŸï¼šååŒ—2(åŒ—äº¬) æˆ– åä¸œ1(æ­å·)
   å®ä¾‹è§„æ ¼ï¼šå…±äº«å‹ x86 æ¶æ„
   å®ä¾‹è§„æ ¼æ—ï¼šecs.s6-c1m1.small (1vCPU 1GB)
   æ“ä½œç³»ç»Ÿï¼šUbuntu 20.04 64ä½
   å­˜å‚¨ï¼šç³»ç»Ÿç›˜ 40GB ESSD
   ç½‘ç»œï¼šä¸“æœ‰ç½‘ç»œVPC
   å…¬ç½‘å¸¦å®½ï¼š1Mbps
   è´­ä¹°æ—¶é•¿ï¼š1å¹´ï¼ˆæœ€ä¼˜æƒ ï¼‰
   ```

3. **è´¹ç”¨ä¼°ç®—**
   ```
   æœåŠ¡å™¨ï¼š68å…ƒ/æœˆ Ã— 12 = 816å…ƒ
   åŸŸåï¼šçº¦60å…ƒ/å¹´
   SSLè¯ä¹¦ï¼šå…è´¹
   æ€»è®¡ï¼šçº¦876å…ƒ/å¹´ï¼ˆå¹³å‡73å…ƒ/æœˆï¼‰
   ```

### æ­¥éª¤3ï¼šè®¾ç½®å®‰å…¨ç»„

1. **å¼€æ”¾å¿…è¦ç«¯å£**
   ```
   HTTP (80)ï¼šå…è®¸æ‰€æœ‰IP (0.0.0.0/0)
   HTTPS (443)ï¼šå…è®¸æ‰€æœ‰IP (0.0.0.0/0)
   SSH (22)ï¼šé™åˆ¶æ‚¨çš„IPè®¿é—®
   è‡ªå®šä¹‰ (3000)ï¼šå…è®¸æ‰€æœ‰IP (0.0.0.0/0)
   ```

2. **å®‰å…¨å»ºè®®**
   - ä¸è¦å¼€æ”¾3306(MySQL)åˆ°å…¬ç½‘
   - å®šæœŸæ›´æ–°å¯†ç 
   - å¯ç”¨äº‘ç›¾é˜²æŠ¤

## ğŸ”§ ç¬¬äºŒé˜¶æ®µï¼šæœåŠ¡å™¨åŸºç¡€é…ç½®

### æ­¥éª¤1ï¼šè¿æ¥æœåŠ¡å™¨

1. **è·å–è¿æ¥ä¿¡æ¯**
   - åœ¨ECSæ§åˆ¶å°æ‰¾åˆ°å®ä¾‹
   - å¤åˆ¶å…¬ç½‘IPåœ°å€
   - é‡ç½®rootå¯†ç 

2. **ä½¿ç”¨SSHè¿æ¥**
   ```bash
   # Windowsç”¨æˆ·ä½¿ç”¨PuTTYæˆ–CMD
   ssh root@æ‚¨çš„æœåŠ¡å™¨IP

   # Mac/Linuxç”¨æˆ·ç›´æ¥ä½¿ç”¨ç»ˆç«¯
   ssh root@æ‚¨çš„æœåŠ¡å™¨IP
   ```

### æ­¥éª¤2ï¼šåŸºç¡€ç³»ç»Ÿé…ç½®

1. **æ›´æ–°ç³»ç»Ÿ**
   ```bash
   # æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
   apt update

   # å‡çº§ç³»ç»Ÿ
   apt upgrade -y

   # å®‰è£…å¿…è¦å·¥å…·
   apt install -y curl wget git vim htop
   ```

2. **åˆ›å»ºç”¨æˆ·è´¦æˆ·**
   ```bash
   # åˆ›å»ºæ–°ç”¨æˆ·
   adduser admin

   # æ·»åŠ åˆ°sudoç»„
   usermod -aG sudo admin

   # åˆ‡æ¢åˆ°æ–°ç”¨æˆ·
   su - admin
   ```

3. **é…ç½®SSHå¯†é’¥**
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆå¯†é’¥
   ssh-keygen -t rsa -b 4096

   # å°†å…¬é’¥æ·»åŠ åˆ°æˆæƒæ–‡ä»¶
   mkdir -p ~/.ssh
   chmod 700 ~/.ssh
   echo "æ‚¨çš„å…¬é’¥å†…å®¹" >> ~/.ssh/authorized_keys
   chmod 600 ~/.ssh/authorized_keys
   ```

## ğŸŸ¢ ç¬¬ä¸‰é˜¶æ®µï¼šNode.jsç¯å¢ƒé…ç½®

### æ­¥éª¤1ï¼šå®‰è£…Node.js

1. **ä½¿ç”¨NodeSourceä»“åº“**
   ```bash
   # ä¸‹è½½NodeSourceå®‰è£…è„šæœ¬
   curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -

   # å®‰è£…Node.js 18
   sudo apt-get install -y nodejs

   # éªŒè¯å®‰è£…
   node -v  # åº”æ˜¾ç¤ºv18.x.x
   npm -v   # åº”æ˜¾ç¤º9.x.x
   ```

2. **é…ç½®npm**
   ```bash
   # è®¾ç½®npmé•œåƒæº
   npm config set registry https://registry.npmmirror.com

   # å®‰è£…å…¨å±€åŒ…ç®¡ç†å™¨
   npm install -g pm2
   ```

### æ­¥éª¤2ï¼šå®‰è£…MongoDB

1. **å¯¼å…¥MongoDBå…¬é’¥**
   ```bash
   wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -
   ```

2. **æ·»åŠ MongoDBæº**
   ```bash
   echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list
   ```

3. **å®‰è£…MongoDB**
   ```bash
   sudo apt-get update
   sudo apt-get install -y mongodb-org

   # å¯åŠ¨MongoDBæœåŠ¡
   sudo systemctl start mongod
   sudo systemctl enable mongod

   # éªŒè¯å®‰è£…
   mongosh --eval 'db.runCommand({ connectionStatus: 1 })'
   ```

4. **é…ç½®MongoDBå®‰å…¨**
   ```bash
   # è¿æ¥MongoDB
   mongosh

   # åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·
   use admin
   db.createUser({
     user: "admin",
     pwd: "æ‚¨çš„ç®¡ç†å‘˜å¯†ç ",
     roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]
   })

   # åˆ›å»ºåº”ç”¨ç”¨æˆ·
   use scl90
   db.createUser({
     user: "scl90admin",
     pwd: "æ‚¨çš„åº”ç”¨å¯†ç ",
     roles: [ { role: "readWrite", db: "scl90" } ]
   })

   exit
   ```

### æ­¥éª¤3ï¼šé…ç½®Nginx

1. **å®‰è£…Nginx**
   ```bash
   sudo apt install -y nginx

   # å¯åŠ¨Nginx
   sudo systemctl start nginx
   sudo systemctl enable nginx

   # éªŒè¯å®‰è£…
   sudo systemctl status nginx
   ```

2. **åˆ›å»ºNginxé…ç½®æ–‡ä»¶**
   ```bash
   sudo nano /etc/nginx/sites-available/scl90
   ```

3. **Nginxé…ç½®å†…å®¹**
   ```nginx
   server {
       listen 80;
       server_name æ‚¨çš„åŸŸå.com www.æ‚¨çš„åŸŸå.com;

       # é‡å®šå‘åˆ°HTTPS
       return 301 https://$server_name$request_uri;
   }

   server {
       listen 443 ssl http2;
       server_name æ‚¨çš„åŸŸå.com www.æ‚¨çš„åŸŸå.com;

       # SSLè¯ä¹¦é…ç½®ï¼ˆç¨åé…ç½®ï¼‰
       # ssl_certificate /etc/ssl/certs/your-domain.crt;
       # ssl_certificate_key /etc/ssl/private/your-domain.key;

       # å®‰å…¨é…ç½®
       ssl_protocols TLSv1.2 TLSv1.3;
       ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;
       ssl_prefer_server_ciphers off;

       # å‹ç¼©é…ç½®
       gzip on;
       gzip_vary on;
       gzip_min_length 1024;
       gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;

       # é™æ€æ–‡ä»¶é…ç½®
       location / {
           root /home/admin/scl90-website/public;
           try_files $uri $uri/ /index.html;

           # ç¼“å­˜é…ç½®
           location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
               expires 1y;
               add_header Cache-Control "public, immutable";
           }
       }

       # APIä»£ç†é…ç½®
       location /api {
           proxy_pass http://localhost:3000;
           proxy_http_version 1.1;
           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection 'upgrade';
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_set_header X-Forwarded-Proto $scheme;
           proxy_cache_bypass $http_upgrade;
       }

       # ç®¡ç†å‘˜é¡µé¢ä»£ç†
       location /admin {
           proxy_pass http://localhost:3000;
           proxy_http_version 1.1;
           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection 'upgrade';
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
           proxy_set_header X-Forwarded-Proto $scheme;
           proxy_cache_bypass $http_upgrade;
       }
   }
   ```

4. **å¯ç”¨é…ç½®**
   ```bash
   # åˆ›å»ºè½¯é“¾æ¥
   sudo ln -s /etc/nginx/sites-available/scl90 /etc/nginx/sites-enabled/

   # åˆ é™¤é»˜è®¤é…ç½®
   sudo rm /etc/nginx/sites-enabled/default

   # æµ‹è¯•é…ç½®
   sudo nginx -t

   # é‡æ–°åŠ è½½Nginx
   sudo systemctl reload nginx
   ```

## ğŸ“ ç¬¬å››é˜¶æ®µï¼šåº”ç”¨éƒ¨ç½²

### æ­¥éª¤1ï¼šå…‹éš†ä»£ç åˆ°æœåŠ¡å™¨

1. **å®‰è£…Git**
   ```bash
   sudo apt install -y git
   ```

2. **å…‹éš†é¡¹ç›®**
   ```bash
   # å›åˆ°ç”¨æˆ·ä¸»ç›®å½•
   cd ~

   # å…‹éš†æ‚¨çš„GitHubä»“åº“
   git clone https://github.com/æ‚¨çš„ç”¨æˆ·å/my-scl90-website.git

   # è¿›å…¥é¡¹ç›®ç›®å½•
   cd scl90-website
   ```

3. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

### æ­¥éª¤2ï¼šé…ç½®ç¯å¢ƒå˜é‡

1. **åˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®**
   ```bash
   nano .env.production
   ```

2. **ç¯å¢ƒå˜é‡å†…å®¹**
   ```env
   NODE_ENV=production
   PORT=3000
   MONGODB_URI=mongodb://scl90admin:æ‚¨çš„åº”ç”¨å¯†ç @localhost:27017/scl90
   ADMIN_PASSWORD=1234love
   ```

### æ­¥éª¤3ï¼šé…ç½®PM2è¿›ç¨‹ç®¡ç†

1. **åˆ›å»ºPM2é…ç½®æ–‡ä»¶**
   ```bash
   nano ecosystem.config.js
   ```

2. **PM2é…ç½®å†…å®¹**
   ```javascript
   module.exports = {
     apps: [{
       name: 'scl90-website',
       script: 'server-final.js',
       instances: 1,
       exec_mode: 'fork',
       env: {
         NODE_ENV: 'production',
         PORT: 3000
       },
       env_file: '.env.production',
       error_file: './logs/err.log',
       out_file: './logs/out.log',
       log_file: './logs/combined.log',
       time: true,
       autorestart: true,
       watch: false,
       max_memory_restart: '1G',
       node_args: '--max-old-space-size=1024'
     }]
   };
   ```

3. **åˆ›å»ºæ—¥å¿—ç›®å½•**
   ```bash
   mkdir logs
   ```

4. **å¯åŠ¨åº”ç”¨**
   ```bash
   # å¯åŠ¨åº”ç”¨
   pm2 start ecosystem.config.js

   # æŸ¥çœ‹çŠ¶æ€
   pm2 status

   # æŸ¥çœ‹æ—¥å¿—
   pm2 logs

   # è®¾ç½®å¼€æœºè‡ªå¯
   pm2 startup
   pm2 save
   ```

## ğŸ”’ ç¬¬äº”é˜¶æ®µï¼šSSLè¯ä¹¦é…ç½®

### æ­¥éª¤1ï¼šå®‰è£…Certbot

1. **å®‰è£…Certbot**
   ```bash
   sudo apt install -y certbot python3-certbot-nginx
   ```

### æ­¥éª¤2ï¼šè·å–SSLè¯ä¹¦

1. **ç”³è¯·è¯ä¹¦**
   ```bash
   # æ›¿æ¢ä¸ºæ‚¨çš„å®é™…åŸŸå
   sudo certbot --nginx -d æ‚¨çš„åŸŸå.com -d www.æ‚¨çš„åŸŸå.com
   ```

2. **é…ç½®è‡ªåŠ¨ç»­æœŸ**
   ```bash
   # æµ‹è¯•è‡ªåŠ¨ç»­æœŸ
   sudo certbot renew --dry-run

   # æ·»åŠ è‡ªåŠ¨ç»­æœŸä»»åŠ¡
   sudo crontab -e

   # æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ¯æœˆ1å·å‡Œæ™¨3ç‚¹æ£€æŸ¥ï¼‰
   0 3 1 * * /usr/bin/certbot renew --quiet
   ```

## ğŸŒ ç¬¬å…­é˜¶æ®µï¼šåŸŸåé…ç½®

### æ­¥éª¤1ï¼šè´­ä¹°åŸŸå

1. **æ¨èåŸŸåæœåŠ¡å•†**
   - é˜¿é‡Œäº‘ä¸‡ç½‘ï¼šhttps://wanwang.aliyun.com
   - è…¾è®¯äº‘ï¼šhttps://dnspod.cloud.tencent.com

2. **åŸŸåé€‰æ‹©å»ºè®®**
   ```
   ä¸“ä¸šåŸŸåï¼š
   - scl90.cn
   - psych-test.cn
   - mental-assessment.cn
   - å¿ƒç†æµ‹è¯„.cn
   ```

### æ­¥éª¤2ï¼šDNSè§£æé…ç½®

1. **æ·»åŠ Aè®°å½•**
   ```
   ä¸»æœºè®°å½•: @
   è®°å½•ç±»å‹: A
   è®°å½•å€¼: æ‚¨çš„æœåŠ¡å™¨IP
   TTL: 600
   ```

2. **æ·»åŠ wwwè®°å½•**
   ```
   ä¸»æœºè®°å½•: www
   è®°å½•ç±»å‹: A
   è®°å½•å€¼: æ‚¨çš„æœåŠ¡å™¨IP
   TTL: 600
   ```

3. **ç­‰å¾…DNSç”Ÿæ•ˆ**
   - é€šå¸¸éœ€è¦10-30åˆ†é’Ÿ
   - ä½¿ç”¨`nslookup æ‚¨çš„åŸŸå.com`éªŒè¯

## ğŸ“Š ç¬¬ä¸ƒé˜¶æ®µï¼šç›‘æ§å’Œç»´æŠ¤

### æ­¥éª¤1ï¼šé…ç½®ç³»ç»Ÿç›‘æ§

1. **å®‰è£…ç›‘æ§å·¥å…·**
   ```bash
   # å®‰è£…htop
   sudo apt install -y htop

   # å®‰è£…nethogsï¼ˆç½‘ç»œç›‘æ§ï¼‰
   sudo apt install -y nethogs

   # å®‰è£…iotopï¼ˆç£ç›˜ç›‘æ§ï¼‰
   sudo apt install -y iotop
   ```

2. **åˆ›å»ºç›‘æ§è„šæœ¬**
   ```bash
   nano ~/monitor.sh
   ```

3. **ç›‘æ§è„šæœ¬å†…å®¹**
   ```bash
   #!/bin/bash

   # ç³»ç»Ÿç›‘æ§è„šæœ¬
   echo "=== ç³»ç»ŸçŠ¶æ€æŠ¥å‘Š $(date) ==="

   # CPUä½¿ç”¨ç‡
   echo "CPUä½¿ç”¨ç‡:"
   top -bn1 | grep "Cpu(s)" | awk '{print $2}' | awk -F'%' '{print $1}'

   # å†…å­˜ä½¿ç”¨æƒ…å†µ
   echo "å†…å­˜ä½¿ç”¨æƒ…å†µ:"
   free -h

   # ç£ç›˜ä½¿ç”¨æƒ…å†µ
   echo "ç£ç›˜ä½¿ç”¨æƒ…å†µ:"
   df -h

   # ç½‘ç»œè¿æ¥æ•°
   echo "ç½‘ç»œè¿æ¥æ•°:"
   netstat -an | grep ESTABLISHED | wc -l

   # PM2åº”ç”¨çŠ¶æ€
   echo "PM2åº”ç”¨çŠ¶æ€:"
   pm2 status

   # MongoDBè¿æ¥çŠ¶æ€
   echo "MongoDBçŠ¶æ€:"
   sudo systemctl is-active mongod

   echo "================================"
   ```

4. **è®¾ç½®å®šæ—¶ç›‘æ§**
   ```bash
   chmod +x ~/monitor.sh

   # æ·»åŠ åˆ°crontabï¼ˆæ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡ï¼‰
   crontab -e

   # æ·»åŠ ä»¥ä¸‹è¡Œ
   0 * * * * ~/monitor.sh >> ~/monitor.log 2>&1
   ```

### æ­¥éª¤2ï¼šé…ç½®æ—¥å¿—è½®è½¬

1. **åˆ›å»ºlogrotateé…ç½®**
   ```bash
   sudo nano /etc/logrotate.d/scl90-website
   ```

2. **é…ç½®å†…å®¹**
   ```
   /home/admin/scl90-website/logs/*.log {
       daily
       missingok
       rotate 7
       compress
       notifempty
       create 644 admin admin
       postrotate
           pm2 reloadLogs
       endscript
   }
   ```

## ğŸ”§ ç¬¬å…«é˜¶æ®µï¼šå¤‡ä»½å’Œå®‰å…¨

### æ­¥éª¤1ï¼šé…ç½®è‡ªåŠ¨å¤‡ä»½

1. **åˆ›å»ºå¤‡ä»½è„šæœ¬**
   ```bash
   nano ~/backup.sh
   ```

2. **å¤‡ä»½è„šæœ¬å†…å®¹**
   ```bash
   #!/bin/bash

   BACKUP_DIR="/home/admin/backups"
   DATE=$(date +%Y%m%d_%H%M%S)

   # åˆ›å»ºå¤‡ä»½ç›®å½•
   mkdir -p $BACKUP_DIR

   # å¤‡ä»½æ•°æ®åº“
   mongodump --host localhost --port 27017 --db scl90 --out $BACKUP_DIR/mongodb_$DATE

   # å¤‡ä»½ä»£ç 
   tar -czf $BACKUP_DIR/code_$DATE.tar.gz /home/admin/scl90-website

   # å¤‡ä»½é…ç½®æ–‡ä»¶
   tar -czf $BACKUP_DIR/config_$DATE.tar.gz /etc/nginx/sites-available/scl90 /home/admin/scl90-website/.env.production

   # åˆ é™¤7å¤©å‰çš„å¤‡ä»½
   find $BACKUP_DIR -name "*.tar.gz" -mtime +7 -delete
   find $BACKUP_DIR -name "mongodb_*" -mtime +7 -exec rm -rf {} \;

   echo "å¤‡ä»½å®Œæˆ: $DATE"
   ```

3. **è®¾ç½®è‡ªåŠ¨å¤‡ä»½**
   ```bash
   chmod +x ~/backup.sh

   # æ·»åŠ åˆ°crontabï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½ï¼‰
   crontab -e

   # æ·»åŠ ä»¥ä¸‹è¡Œ
   0 2 * * * ~/backup.sh >> ~/backup.log 2>&1
   ```

### æ­¥éª¤2ï¼šå®‰å…¨åŠ å›º

1. **é…ç½®é˜²ç«å¢™**
   ```bash
   # å®‰è£…UFW
   sudo apt install -y ufw

   # é»˜è®¤ç­–ç•¥
   sudo ufw default deny incoming
   sudo ufw default allow outgoing

   # å¼€æ”¾å¿…è¦ç«¯å£
   sudo ufw allow ssh
   sudo ufw allow 80/tcp
   sudo ufw allow 443/tcp

   # å¯ç”¨é˜²ç«å¢™
   sudo ufw enable
   ```

2. **é…ç½®fail2ban**
   ```bash
   # å®‰è£…fail2ban
   sudo apt install -y fail2ban

   # åˆ›å»ºé…ç½®æ–‡ä»¶
   sudo nano /etc/fail2ban/jail.local
   ```

3. **fail2bané…ç½®**
   ```ini
   [DEFAULT]
   bantime = 3600
   findtime = 600
   maxretry = 3

   [sshd]
   enabled = true
   port = ssh

   [nginx-http-auth]
   enabled = true

   [nginx-limit-req]
   enabled = true
   ```

4. **å¯åŠ¨fail2ban**
   ```bash
   sudo systemctl restart fail2ban
   sudo systemctl enable fail2ban
   ```

## ğŸ§ª ç¬¬ä¹é˜¶æ®µï¼šæµ‹è¯•å’ŒéªŒè¯

### æ­¥éª¤1ï¼šåŠŸèƒ½æµ‹è¯•æ¸…å•

1. **åŸºç¡€åŠŸèƒ½æµ‹è¯•**
   - [ ] ä¸»é¡µæ­£å¸¸åŠ è½½
   - [ ] æ‰€æœ‰é™æ€èµ„æºæ­£å¸¸
   - [ ] HTTPSè¯ä¹¦æ­£å¸¸
   - [ ] APIæ¥å£å“åº”æ­£å¸¸

2. **æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•**
   - [ ] ç®¡ç†å‘˜ç™»å½•åŠŸèƒ½
   - [ ] åˆ›å»ºæµ‹è¯„é“¾æ¥
   - [ ] å®Œæˆæµ‹è¯„æµç¨‹
   - [ ] æ•°æ®åº“è¯»å†™æ­£å¸¸

3. **æ€§èƒ½æµ‹è¯•**
   - [ ] é¡µé¢åŠ è½½é€Ÿåº¦æµ‹è¯•
   - [ ] APIå“åº”æ—¶é—´æµ‹è¯•
   - [ ] å¹¶å‘ç”¨æˆ·æµ‹è¯•

### æ­¥éª¤2ï¼šç›‘æ§æµ‹è¯•

1. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**
   ```bash
   # æ£€æŸ¥Nginx
   sudo systemctl status nginx

   # æ£€æŸ¥PM2
   pm2 status

   # æ£€æŸ¥MongoDB
   sudo systemctl status mongod
   ```

2. **æŸ¥çœ‹æ—¥å¿—**
   ```bash
   # æŸ¥çœ‹åº”ç”¨æ—¥å¿—
   pm2 logs

   # æŸ¥çœ‹Nginxæ—¥å¿—
   sudo tail -f /var/log/nginx/access.log
   sudo tail -f /var/log/nginx/error.log

   # æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
   sudo journalctl -f
   ```

## ğŸ“± ç¬¬åé˜¶æ®µï¼šç§»åŠ¨ç«¯å’ŒCDNé…ç½®

### æ­¥éª¤1ï¼šç§»åŠ¨ç«¯ä¼˜åŒ–

1. **å¯ç”¨Nginxç§»åŠ¨ç«¯ä¼˜åŒ–**
   ```nginx
   # åœ¨Nginxé…ç½®ä¸­æ·»åŠ 
   location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|webp)$ {
       expires 1y;
       add_header Cache-Control "public, immutable";
       add_header Vary Accept-Encoding;

       # ç§»åŠ¨ç«¯å›¾ç‰‡ä¼˜åŒ–
       if ($http_accept ~* "webp") {
           rewrite (.+)\.(png|jpg|jpeg)$ $1.webp break;
       }
   }
   ```

### æ­¥éª¤2ï¼šCDNé…ç½®ï¼ˆå¯é€‰ï¼‰

1. **é˜¿é‡Œäº‘CDNé…ç½®**
   - ç™»å½•é˜¿é‡Œäº‘CDNæ§åˆ¶å°
   - æ·»åŠ åŠ é€ŸåŸŸå
   - é…ç½®æºç«™IP
   - å¼€å¯HTTPS

## ğŸ¯ éƒ¨ç½²æˆåŠŸéªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] ç½‘ç«™é€šè¿‡HTTPSæ­£å¸¸è®¿é—®
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ
- [ ] æ•°æ®åº“è¯»å†™æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸

### æ€§èƒ½éªŒæ”¶
- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 3ç§’
- [ ] APIå“åº”æ—¶é—´ < 500ms
- [ ] æœåŠ¡å™¨è´Ÿè½½ < 50%
- [ ] å†…å­˜ä½¿ç”¨ç‡ < 80%

### å®‰å…¨éªŒæ”¶
- [ ] SSLè¯ä¹¦æ­£å¸¸
- [ ] é˜²ç«å¢™é…ç½®æ­£ç¡®
- [ ] è‡ªåŠ¨å¤‡ä»½æ­£å¸¸
- [ ] ç›‘æ§ç³»ç»Ÿæ­£å¸¸

## ğŸ’° æˆæœ¬æ€»ç»“

### æœˆåº¦æˆæœ¬
```
äº‘æœåŠ¡å™¨ï¼š68å…ƒ
åŸŸåè´¹ç”¨ï¼š5å…ƒ/æœˆ
æ€»æˆæœ¬ï¼šçº¦73å…ƒ/æœˆ
```

### å¹´åº¦æˆæœ¬
```
äº‘æœåŠ¡å™¨ï¼š816å…ƒï¼ˆå¹´ä»˜ï¼‰
åŸŸåè´¹ç”¨ï¼š60å…ƒ/å¹´
æ€»æˆæœ¬ï¼šçº¦876å…ƒ/å¹´
```

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç½‘ç«™æ— æ³•è®¿é—®**
   ```bash
   # æ£€æŸ¥NginxçŠ¶æ€
   sudo systemctl status nginx

   # æ£€æŸ¥ç«¯å£å ç”¨
   sudo netstat -tlnp | grep :80

   # æŸ¥çœ‹Nginxæ—¥å¿—
   sudo tail -f /var/log/nginx/error.log
   ```

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   ```bash
   # æ£€æŸ¥MongoDBçŠ¶æ€
   sudo systemctl status mongod

   # æµ‹è¯•è¿æ¥
   mongosh --host localhost --port 27017

   # æŸ¥çœ‹MongoDBæ—¥å¿—
   sudo tail -f /var/log/mongodb/mongod.log
   ```

3. **åº”ç”¨æ— æ³•å¯åŠ¨**
   ```bash
   # æŸ¥çœ‹PM2çŠ¶æ€
   pm2 status

   # æŸ¥çœ‹PM2æ—¥å¿—
   pm2 logs

   # é‡å¯åº”ç”¨
   pm2 restart all
   ```

## ğŸ† æ€»ç»“

é€šè¿‡ä»¥ä¸Š10ä¸ªæ­¥éª¤ï¼Œæ‚¨å°†æ‹¥æœ‰ï¼š
- âœ… å®Œå…¨è‡ªä¸»çš„äº‘æœåŠ¡å™¨
- âœ… é«˜æ€§èƒ½çš„SCL-90å¿ƒç†æµ‹è¯„ç½‘ç«™
- âœ… ä¸“ä¸šçš„SSLè¯ä¹¦é…ç½®
- âœ… å®Œå–„çš„ç›‘æ§å’Œå¤‡ä»½ç³»ç»Ÿ
- âœ… æœˆæˆæœ¬ä»…73å…ƒçš„é«˜æ€§ä»·æ¯”æ–¹æ¡ˆ

**éƒ¨ç½²å®Œæˆåï¼Œæ‚¨çš„ç½‘ç«™å°†å®Œå…¨è„±ç¦»Vercelé™åˆ¶ï¼Œäº«å—çœŸæ­£çš„ç‹¬ç«‹è¿è¥ï¼** ğŸ‰

---

**é¢„ä¼°éƒ¨ç½²æ—¶é—´ï¼š3-4å°æ—¶**
**æŠ€æœ¯éš¾åº¦ï¼šä¸­ç­‰**
**é€‚åˆäººç¾¤ï¼šæœ‰ä¸€å®šLinuxåŸºç¡€çš„ç”¨æˆ·**